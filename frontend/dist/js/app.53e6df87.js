(function(){"use strict";var e={4192:function(e,t,o){var a=o(5130),s=o(6768);const r={id:"app"};function n(e,t,o,a,n,i){const l=(0,s.g2)("header-component"),u=(0,s.g2)("router-view"),d=(0,s.g2)("footer-component");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(l),(0,s.bF)(u),(0,s.bF)(d)])}const i={class:"nav-container"};function l(e,t,o,r,n,l){const u=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("nav",null,[(0,s.Lk)("div",i,[t[4]||(t[4]=(0,s.Lk)("h1",null,"MEVN Task App",-1)),(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[(0,s.bF)(u,{to:"/"},{default:(0,s.k6)((()=>t[1]||(t[1]=[(0,s.eW)("Home")]))),_:1})]),(0,s.bo)((0,s.Lk)("li",null,[(0,s.bF)(u,{to:"/login"},{default:(0,s.k6)((()=>t[2]||(t[2]=[(0,s.eW)("Login")]))),_:1})],512),[[a.aG,!e.isAuthenticated]]),(0,s.bo)((0,s.Lk)("li",null,[(0,s.bF)(u,{to:"/register"},{default:(0,s.k6)((()=>t[3]||(t[3]=[(0,s.eW)("Register")]))),_:1})],512),[[a.aG,!e.isAuthenticated]]),(0,s.bo)((0,s.Lk)("li",null,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.handleLogout&&l.handleLogout(...e))},"Logout")],512),[[a.aG,e.isAuthenticated]])])])])}o(4114);var u=o(782),d={computed:{...(0,u.aH)(["isAuthenticated"])},methods:{...(0,u.i0)(["logout"]),handleLogout(){this.logout(),this.$router.push("/")}}},c=o(1241);const p=(0,c.A)(d,[["render",l],["__scopeId","data-v-442a35c2"]]);var k=p;function h(e,t,o,a,r,n){return(0,s.uX)(),(0,s.CE)("footer",null,t[0]||(t[0]=[(0,s.Lk)("p",null,"Â© 2024 | Todos los derechos resesrvados.",-1)]))}var m={name:"FooterComponent"};const g=(0,c.A)(m,[["render",h],["__scopeId","data-v-7bd61ddb"]]);var f=g,v={name:"App",components:{HeaderComponent:k,FooterComponent:f},created(){this.checkAuthentication()},methods:{...(0,u.PY)(["setUser"]),checkAuthentication(){const e=localStorage.getItem("token"),t=JSON.parse(localStorage.getItem("user"));e&&t&&this.setUser(t)}}};const b=(0,c.A)(v,[["render",n]]);var L=b,y=o(1387);const w={class:"home"},A={class:"welcome-container"},I={class:"button-container"};function T(e,t,o,a,r,n){const i=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",w,[(0,s.Lk)("div",A,[t[2]||(t[2]=(0,s.Lk)("h1",null,"Welcome to the Task Manager App",-1)),t[3]||(t[3]=(0,s.Lk)("p",null,"Please log in or register to manage your tasks.",-1)),(0,s.Lk)("div",I,[(0,s.bF)(i,{to:"/login"},{default:(0,s.k6)((()=>t[0]||(t[0]=[(0,s.Lk)("button",{class:"btn"},"Login",-1)]))),_:1}),(0,s.bF)(i,{to:"/register"},{default:(0,s.k6)((()=>t[1]||(t[1]=[(0,s.Lk)("button",{class:"btn"},"Register",-1)]))),_:1})])])])}var S={name:"HomePage"};const _=(0,c.A)(S,[["render",T],["__scopeId","data-v-734bea8a"]]);var E=_,C=o(4232);const F={class:"login-container"},O={key:0,class:"error-message"};function D(e,t,o,r,n,i){return(0,s.uX)(),(0,s.CE)("div",F,[t[4]||(t[4]=(0,s.Lk)("h2",null,"Login",-1)),(0,s.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>i.loginForm&&i.loginForm(...e)),["prevent"])),class:"login-form"},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),type:"email",placeholder:"Email",required:""},null,512),[[a.Jo,n.email]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),type:"password",placeholder:"Password",required:""},null,512),[[a.Jo,n.password]]),t[3]||(t[3]=(0,s.Lk)("button",{type:"submit"},"Login",-1)),n.errorMessage?((0,s.uX)(),(0,s.CE)("p",O,(0,C.v_)(n.errorMessage),1)):(0,s.Q3)("",!0)],32)])}var U={data(){return{email:"",password:"",errorMessage:null}},methods:{...(0,u.i0)(["login"]),async loginForm(){try{const e=await fetch("http://localhost:3000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email,password:this.password})});if(!e.ok)return void(401===e.status?this.errorMessage="Invalid email or password.":this.errorMessage="Login failed. Please try again.");const t=await e.json();t.token&&t.user?(this.login(t),localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),this.email="",this.password="",this.$router.push("/dashboard")):this.errorMessage="Invalid login response"}catch(e){this.errorMessage="Login failed. Please try again."}}}};const J=(0,c.A)(U,[["render",D],["__scopeId","data-v-5621cd76"]]);var M=J;function P(e,t,o,r,n,i){return(0,s.uX)(),(0,s.CE)("div",null,[t[5]||(t[5]=(0,s.Lk)("h2",null,"Register",-1)),(0,s.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>i.registerForm&&i.registerForm(...e)),["prevent"]))},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),type:"text",placeholder:"Username",required:""},null,512),[[a.Jo,n.username]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),type:"email",placeholder:"Email",required:""},null,512),[[a.Jo,n.email]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e),type:"password",placeholder:"Password",required:""},null,512),[[a.Jo,n.password]]),t[4]||(t[4]=(0,s.Lk)("button",{type:"submit"},"Register",-1))],32)])}var X=o(4373),$={data(){return{username:"",email:"",password:""}},methods:{async registerForm(){try{const e=await X.A.post("http://localhost:3000/api/register",{username:this.username,email:this.email,password:this.password});console.log(e.data),this.$router.push("/login")}catch(e){console.error(e)}}}};const j=(0,c.A)($,[["render",P]]);var q=j;const V={class:"dashboard"},x={class:"dashboard-container"},N={class:"form-section"},H={class:"tasks-section"},W={class:"tasks-list"},R={class:"task-info"},z=["onClick"];function B(e,t,o,a,r,n){const i=(0,s.g2)("TaskForm");return(0,s.uX)(),(0,s.CE)("div",V,[t[2]||(t[2]=(0,s.Lk)("h1",null,"Task Dashboard",-1)),(0,s.Lk)("div",x,[(0,s.Lk)("div",N,[t[0]||(t[0]=(0,s.Lk)("h2",null,"Add a New Task",-1)),e.isAuthenticated?((0,s.uX)(),(0,s.Wv)(i,{key:0,onTaskAdded:n.fetchTasks,userId:r.userId},null,8,["onTaskAdded","userId"])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",H,[t[1]||(t[1]=(0,s.Lk)("h2",null,"Your Tasks",-1)),(0,s.Lk)("ul",W,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.tasks,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e._id,class:"task-item"},[(0,s.Lk)("div",R,[(0,s.Lk)("h3",null,(0,C.v_)(e.title),1),(0,s.Lk)("p",null,(0,C.v_)(e.description),1),(0,s.Lk)("small",null,"Due: "+(0,C.v_)(new Date(e.dueDate).toLocaleDateString()),1)]),(0,s.Lk)("button",{onClick:t=>n.deleteTask(e._id),class:"delete-btn"},"Delete",8,z)])))),128))])])])])}const G={class:"form-group"},Q={class:"form-group"},Y={class:"form-group"};function K(e,t,o,r,n,i){return(0,s.uX)(),(0,s.CE)("form",{class:"task-form",onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>i.submitTask&&i.submitTask(...e)),["prevent"]))},[(0,s.Lk)("div",G,[t[4]||(t[4]=(0,s.Lk)("label",{for:"title"},"Task Title:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>n.task.title=e),required:"",placeholder:"Enter task title"},null,512),[[a.Jo,n.task.title]])]),(0,s.Lk)("div",Q,[t[5]||(t[5]=(0,s.Lk)("label",{for:"description"},"Task Description:",-1)),(0,s.bo)((0,s.Lk)("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=e=>n.task.description=e),required:"",placeholder:"Enter task description"},null,512),[[a.Jo,n.task.description]])]),(0,s.Lk)("div",Y,[t[6]||(t[6]=(0,s.Lk)("label",{for:"dueDate"},"Due Date:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date",id:"dueDate","onUpdate:modelValue":t[2]||(t[2]=e=>n.task.dueDate=e),required:""},null,512),[[a.Jo,n.task.dueDate]])]),t[7]||(t[7]=(0,s.Lk)("button",{type:"submit",class:"add-task-btn"},"Add Task",-1))],32)}var Z={props:{userId:{type:String,required:!0,default:""}},data(){return{task:{title:"",description:"",dueDate:""}}},methods:{async submitTask(){try{const e=localStorage.getItem("token"),t={...this.task,userId:this.userId};await X.A.post("http://localhost:3000/api/tasks",t,{headers:{Authorization:`Bearer ${e}`}}),this.$emit("taskAdded"),this.task={title:"",description:"",dueDate:""}}catch(e){console.error("Error al agregar la tarea:",e.response?.data||e.message)}}}};const ee=(0,c.A)(Z,[["render",K],["__scopeId","data-v-34a2d154"]]);var te=ee,oe={components:{TaskForm:te},data(){return{tasks:[],userId:null}},computed:{...(0,u.aH)(["isAuthenticated"])},created(){this.setUserId(),this.fetchTasks()},methods:{async fetchTasks(){try{const e=localStorage.getItem("token"),t=await X.A.get("http://localhost:3000/api/tasks",{headers:{Authorization:`Bearer ${e}`}});this.tasks=t.data}catch(e){console.error("Error fetching tasks:",e)}},setUserId(){const e=JSON.parse(localStorage.getItem("user"));e&&e._id?this.userId=e._id:console.error("No userId found in localStorage")},async deleteTask(e){try{const t=localStorage.getItem("token");await X.A.delete(`http://localhost:3000/api/tasks/${e}`,{headers:{Authorization:`Bearer ${t}`}}),this.fetchTasks()}catch(t){console.error("Error deleting task:",t)}}}};const ae=(0,c.A)(oe,[["render",B],["__scopeId","data-v-1c1b2ac8"]]);var se=ae;const re=[{path:"/",component:E},{path:"/login",component:M},{path:"/register",component:q},{path:"/dashboard",component:se}],ne=(0,y.aE)({history:(0,y.LA)(),routes:re});var ie=ne;const le=(0,u.y$)({state:{user:JSON.parse(localStorage.getItem("user"))||null,isAuthenticated:!!localStorage.getItem("token"),tasks:[]},mutations:{setUser(e,t){e.user=t,e.isAuthenticated=!!t},setTasks(e,t){e.tasks=t},logout(e){e.user=null,e.isAuthenticated=!1}},actions:{async login({commit:e},t){e("setUser",t)},async fetchTasks({commit:e}){const t=await fetch("/api/tasks").then((e=>e.json()));e("setTasks",t)},logout({commit:e}){localStorage.removeItem("token"),localStorage.removeItem("user"),e("logout")}}});var ue=le;const de=(0,a.Ef)(L);de.use(ie),de.use(ue),de.mount("#app")}},t={};function o(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,a,s,r){if(!a){var n=1/0;for(d=0;d<e.length;d++){a=e[d][0],s=e[d][1],r=e[d][2];for(var i=!0,l=0;l<a.length;l++)(!1&r||n>=r)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(i=!1,r<n&&(n=r));if(i){e.splice(d--,1);var u=s();void 0!==u&&(t=u)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,s,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,r,n=a[0],i=a[1],l=a[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(s in i)o.o(i,s)&&(o.m[s]=i[s]);if(l)var d=l(o)}for(t&&t(a);u<n.length;u++)r=n[u],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(4192)}));a=o.O(a)})();
//# sourceMappingURL=app.53e6df87.js.map